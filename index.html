<!DOCTYPE html>
<html lang="fr">
<head> <!-- ISOLÉ -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RS-VILLA</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

  <!-- Feuille de style externe -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="login-container">
    <h1>RS-Villa</h1>
    <div class="login-card">
      <h2 class="login-title">Connexion</h2>
      <div class="input-group">
        <label for="username">🕤 Votre pseudo</label>
        <input type="text" id="username" placeholder="*******" required />
      </div>
      <div class="input-group">
        <label for="room-name-input">🏠 Nom de la Villa</label>
        <input type="text" id="room-name-input" placeholder="*******" required />
      </div>
      <div class="input-group">
        <label for="password-input">🔐 Mot de passe</label>
        <input type="password" id="password-input" placeholder="*******" required />
      </div>
      <button class="login-button" onclick="joinRoom()">🚪 Entrer dans la Villa</button>
    </div>
  </div>

  <!-- Section de chat -->
  <div class="container container-chat">
    <div id="chat-container">
      <div id="room-name-display" class="room-title"></div>

      <!-- Sélecteur de thème -->
      <div id="theme-selector" class="theme-selector">
        <label for="theme-select" class="theme-label">🎨 Thème :</label>
        <select id="theme-select" class="theme-select">
          <option value="default">Sombre</option>
          <option value="ocean">Océan</option>
          <option value="forest">Forêt</option>
          <option value="rosewood">Rosewood</option>
          <option value="rosewood">Amour</option>
          <option value="noir">Nuit discrète</option>
          <option value="midnight">Minuit</option>
          <option value="sepia">Sépia</option>
          <option value="galaxy">Galaxie</option>
        </select>
      </div>

      <div id="user-list">
        <h2>Utilisateurs connectés</h2>
        <ul id="online-users"></ul>
      </div>

      <div id="reply-container" class="reply-container">
        <span id="reply-message"></span>
        <button onclick="cancelReply()" class="reply-cancel">Annuler</button>
      </div>

      <div id="messages"></div>

      <div id="audio-preview" class="audio-preview">
        <audio id="audio-player" controls></audio>
        <br>
        <button onclick="uploadAudio()">✅ Envoyer le vocal</button>
        <button onclick="cancelAudio()" class="cancel-audio">❌ Annuler</button>
      </div>

      <div id="input-section">
        <button class="icon-button" onclick="toggleEmojiPicker()" title="Emoji">
          <svg viewBox="0 0 24 24"><path d="M12 22C6.48 22 2 17.52 2 12s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10zm0-4a6 6 0 006-6H6a6 6 0 006 6z"/></svg>
        </button>
        <input type="text" id="message-input" placeholder="Écrivez un message">
        <button class="icon-button" onclick="sendMessage()" title="Envoyer">
          <svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2z"/></svg>
        </button>
        <button class="icon-button" onclick="toggleRecording()" id="record-btn" title="Audio">
          <svg viewBox="0 0 24 24"><path d="M12 14a3 3 0 003-3V5a3 3 0 00-6 0v6a3 3 0 003 3zm6-3a6 6 0 01-12 0H4a8 8 0 0016 0h-2zm-6 8c2.21 0 4-1.79 4-4h-2a2 2 0 01-4 0H8c0 2.21 1.79 4 4 4z"/></svg>
        </button>
        <input type="file" id="image-input" accept="image/*" multiple style="display: none;" onchange="handleImageUpload(event)">
        <button class="icon-button" onclick="document.getElementById('image-input').click()" title="Image">
          <svg viewBox="0 0 24 24"><path d="M21 19V5H3v14h18zm-2-2H5V7h14v10z"/></svg>
        </button>
        <button class="icon-button" onclick="quitRoom()" title="Quitter">
          <svg viewBox="0 0 24 24"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59z"/></svg>
        </button>
      </div>

      <div id="emoji-picker"></div>
    </div>

    <!-- Camouflage -->
    <div id="stealth-screen" class="stealth-screen">
      <p class="stealth-question">Résous : 9 x 2548 + 236</p>
      <input id="stealth-code" class="stealth-input" placeholder="Tape ici">
      <button onclick="quitStealthSafely()" class="stealth-quit">Quitter discrètement</button>
    </div>

    <div id="image-popup">
      <div id="popup-inner">
        <img id="popup-img" />
        <button id="close-popup-btn">✖</button>
      </div>
    </div>
  </div>

  <!-- Boutons flottants -->
  <div class="floating-buttons">
    <button class="icon-button danger-button" onclick="panicWipe()" title="Panic">🧨</button>
    <button class="icon-button stealth-button" onclick="activateStealth()" title="Camouflage">🕶️</button>
  </div>

  <!-- Script principal -->
  <script src="script.js"></script>
</body>
</html>
