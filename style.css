<style>
:root {
  --bg-color: #1f1f1f;
  --text-color: #ffffff;
  --accent-color: #ffd700;
  --button-bg: #5a5a5a;
  --button-hover-bg: #4c4c4c;
  --button-shadow: rgba(255, 215, 0, 0.25);
  --transition: all 0.3s ease;
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background: var(--bg-color);
  color: var(--text-color);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  margin: 0;
}
#login-container {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px 0;
}
.login-card {
  background: #2a2a3a;
  padding: 30px;
  border-radius: 12px;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}
.login-title { font-size: 1.2em; text-align: center; color: #eee; margin-bottom: 25px; }
.input-group { margin-bottom: 15px; }
.input-group label { display:block; margin-bottom:6px; color:#ccc; }
.input-group input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  background: #444;
  color: #fff;
}
.login-button {
  width: 100%;
  background: #ffd700;
  color: #1f1f2e;
  padding: 12px;
  font-weight: 700;
  font-size: 1rem;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.2s ease;
}
.login-button:hover { background: #ffc400; }
.container-chat { width:100%; min-height:100vh; padding:20px; display:flex; align-items:center; justify-content:center; }
#chat-container {
  width: 70%;
  max-width: 900px;
  background: rgba(60, 60, 60, 0.9);
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0px 4px 20px rgba(0,0,0,0.25);
  display: none;           /* caché par défaut */
  flex-direction: column;  /* sera affiché en flex en JS */
  max-height: 92vh;
  overflow: hidden;
}
.room-title { font-size:1.4rem; font-weight:700; color:#ffd700; margin-bottom:10px; }
.theme-selector { text-align:right; margin-bottom:10px; display:flex; gap:10px; align-items:center; justify-content:flex-end; }
.theme-label { font-size:0.9rem; color:#ddd; }
.theme-select {
  padding: 8px 10px;
  border-radius: 10px;
  background: #444;
  color: #ffd700;
  border: 1px solid #666;
}
.theme-toggle {
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--button-bg);
  color: var(--accent-color);
  border: 1px solid #888;
  cursor: pointer;
  transition: var(--transition);
}
.theme-toggle:hover { background: var(--button-hover-bg); }
#user-list {
  margin-top: 10px;
  padding: 10px;
  background: #333;
  border-radius: 12px;
  color: #ffd700;
  width: 100%;
  max-width: 360px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.25);
}
#online-users { list-style:none; margin:0; padding:0; max-height:200px; overflow:auto; }
#online-users li {
  display:flex; align-items:center; gap:10px;
  padding:8px; margin-bottom:6px; border-radius:8px; background:#444;
}
.status-indicator { width:10px; height:10px; border-radius:50%; background:green; }
.status-offline .status-indicator { background: gray; }
.user-status { color:#fff; font-weight:600; }
#messages {
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  padding:10px;
  background:#2e2e2e;
  border-radius:10px;
  margin: 12px 0 10px 0;
  min-height: 140px;
}
.message {
  display:flex; flex-direction:column;
  max-width:75%; min-width:140px;
  padding:12px 16px; padding-bottom:26px;
  margin:8px 0;
  border-radius:18px;
  word-break: break-word;
  position:relative;
  box-shadow: 0 2px 12px rgba(0,0,0,0.2);
  animation: fadeInUp 0.25s ease;
}
.message.user1 { align-self:flex-end; background: var(--message-color-user1, linear-gradient(135deg, #4e54c8, #8f94fb)); color:#fff; border-bottom-right-radius:4px; }
.message.user1::after { content:""; position:absolute; right:-8px; bottom:12px; border-left:8px solid #8f94fb; border-top:8px solid transparent; border-bottom:8px solid transparent; }
.message.user2 { align-self:flex-start; background: var(--message-color-user2, #3a3a3a); color:#fff; border-bottom-left-radius:4px; }
.message.user2::after { content:""; position:absolute; left:-8px; bottom:12px; border-right:8px solid #3a3a3a; border-top:8px solid transparent; border-bottom:8px solid transparent; }

.username-tag {
  font-weight:700; color:#ffd700; font-size:0.85rem;
  padding:4px 8px; background:rgba(255,255,255,0.08);
  border-radius:10px; margin-bottom:5px; display:inline-block;
}
.message.user2 .username-tag { background:#555; color:#f1f1f1; }
.msg-text { font-size:1rem; line-height:1.5; }
.citation { background:#444; padding:6px; margin-bottom:6px; border-radius:6px; font-style:italic; color:#ccc; }

.reaction-container { margin-top:6px; display:flex; align-items:center; flex-wrap:wrap; gap:6px; }
.reaction-label { font-size:0.8rem; color:#ddd; font-style:italic; }
.reaction-emoji { font-size:1.15rem; }
.action-buttons { display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:8px; }
.icon-button { background:transparent; border:none; cursor:pointer; padding:8px; border-radius:50%; transition: transform .2s ease, background .2s ease; }
.icon-button:hover { background:#444; transform: scale(1.06); }
.icon-button svg { width:24px; height:24px; fill:#ffd700; }
#emoji-picker {
  display:none; position:absolute; z-index:9999;
  background:#333; border-radius:10px; padding:10px;
  box-shadow: 0 4px 10px rgba(0,0,0,.25);
  flex-wrap:wrap; gap:8px; max-width:220px;
}
.emoji-picker-message {
  display:none; position:absolute; z-index:100;
  background:#333; border-radius:10px; padding:10px;
  box-shadow: 0 4px 10px rgba(0,0,0,.25); bottom:36px; right:0;
}
.emoji { font-size:1.4rem; cursor:pointer; padding:5px; }
.emoji:hover { transform: scale(1.15); }

#input-section {
  position:sticky; bottom:0; background:var(--bg-color);
  z-index: 5; padding:10px; display:flex; gap:8px; align-items:center;
}
#message-input { flex:1; font-size:1rem; padding:10px; border-radius:10px; border:none; background:#444; color:#fff; }
.image-popup { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:9999; }
.popup-inner { position:relative; }
.popup-img { max-width:90vw; max-height:90vh; border-radius:12px; box-shadow: 0 0 20px #000; transform: scale(0.96); transition: transform .2s ease; }
.image-popup[style*="display: flex"] .popup-img { transform: scale(1); }
.close-popup-btn { position:absolute; top:-20px; right:-20px; background:#e74c3c; color:#fff; border:none; font-size:1.4rem; padding:6px 10px; border-radius:50%; cursor:pointer; }

.floating-buttons { position:fixed; bottom:12px; right:12px; display:flex; gap:10px; z-index:9999; }
.danger-button { border:1px solid #800000; color:#800000; }
.danger-button:hover { background:#b71c1c; color:#fff; }
.stealth-button { border:1px solid #444; color:#ccc; }
.stealth-button:hover { background:#222; }

.seen-check { position:absolute; bottom:6px; right:12px; opacity:.75; width:18px; height:18px; pointer-events:none; animation: fadeIn .25s ease; }
.seen-check svg { width:100%; height:100%; stroke:#00ff88; fill:none; stroke-width:1.6; stroke-linecap:round; stroke-linejoin:round; }

.outgoing-call, .incoming-call {
  position: fixed; top: 30%; left: 50%; transform: translate(-50%, -30%);
  background:#333; padding:20px; border-radius:12px; color:#ffd700; text-align:center;
  z-index: 9999; box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}
.outgoing-call { animation: pulseCall 1.5s infinite; }
@keyframes pulseCall { 0%{box-shadow:0 0 0 0 rgba(255,215,0,.35);} 70%{box-shadow:0 0 0 15px rgba(255,215,0,0);} 100%{box-shadow:0 0 0 0 rgba(255,215,0,0);} }

.toast {
  position:fixed; top:12px; right:12px; background:#333; color:#ffd700;
  padding:10px 14px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,.35); z-index:9999;
}
@keyframes fadeIn { from { transform:scale(.96); opacity:0; } to { transform:none; opacity:1; } }
@keyframes fadeInUp { from { transform: translateY(8px); opacity: 0; } to { transform: translateY(0); opacity:1; } }

@media (max-width: 900px) { #chat-container { width: 90%; } }
@media (max-width: 600px) {
  body { padding: 12px; }
  #login-container, #chat-container { width: 100%; padding: 14px; }
  #messages { max-height: 55vh; }
}

</style>
